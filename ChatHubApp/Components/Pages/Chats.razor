@page "/chats"
@layout HomeLayout
<style>
    p {
        margin: 0;
    }

    .content {
        padding-top: 0;
    }

    .button-response {
        border-radius: 5px;
        height: max-content;
        padding: 5px;
        color: white
    }

    .online-circle{
      
        position: absolute;
        top: 30px;
        left: 30px;
        border-radius: 50%;
        height: 9px;
        width: 9px;
        background-color: green;
    }
    
</style>


<div class="container p-0">

    @* header *@
    <div style="background-color:#7196FF;padding:9px;">
        <div class="d-flex justify-content-between align-items-center" style="color:white;font-size:22px;">

            <p class="ms-3"> Aspire Chat</p>
            <div class="d-flex">
                <i class="fa fa-camera me-3" aria-hidden="true"></i>
                <i class="fa fa-bell-o me-3" @onclick="GoToNotification" aria-hidden="true"></i>
                <i class="fa fa-sign-out me-3" @onclick="Logout" aria-hidden="true"></i>
            </div>
        </div>
    </div>
    
        @if(@isBusy){
            <div class="d-flex justify-content-center mt-3">
                <div class="spinner-border"  style="color:#7196FF" role="status">
              <span class="sr-only">Loading...</span>
            </div>
          </div>
            
        }
        else{
        @foreach (var item in friends)
    {

            <div @onclick="() => GoToInDividualChat(item.FriendId,item.UnReadMessagesCount)" class="mx-3 p-2" style="border-radius:5px;">
                <div class="d-flex justify-content-between">
                    <div class="d-flex  align-items-center">
                         <div style="position:relative">
                                <img src=".\imagePlace.jpg" style="border-radius:50%;height:40px" />
                                @if (@item.IsOnline == true)
                                {
                                    <div class="online-circle" style="background-color:green;">
                                    </div>
                                }
                                else
                                {
                               
                                    <div class="online-circle" style="background-color:#D3D3D3;">
                                    </div>
                                }

                         </div>
                        <div class="ms-2">
                                <p style="font-size:16px;">@item.FriendName</p>
                                @if (@item.IsOnline == true)
                                {
                                     <p style="font-size:14px;color:green;">Online</p>
                                }
                                else
                                {
                                <p style="font-size:14px;color:	#999999;">Last Seen: @item.LastSeen</p>
                                
                                }
                         
                        </div>
                    </div>
                   
                        @if (@item.UnReadMessagesCount != 0)
                    {
                        <div style="background-color:#7196FF;border-radius:50%;height:23px;width:23px;">
                                <p style="text-align:center;color:white;font-size:14px;">@item.UnReadMessagesCount</p>

                            </div>
                    }
                
                </div>
        </div>

        }
    }

</div>